{{if and (eq .Values.DataEase.engine_mode "cluster") (.Values.kettle.enable)}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: kettle-properties
data:
    repositories.xml: |
      <?xml version="1.0" encoding="UTF-8"?>
      <repositories>
          <repository>
        <id>KettleFileRepository</id>
              <name>repo</name>
              <description>File repository</description>
              <is_default>false</is_default>
              <base_directory>/opt/kettle/data</base_directory>
              <read_only>N</read_only>
              <hides_hidden_files>N</hides_hidden_files>
          </repository>
      </repositories>
    kettle.properties: "# This file was generated by Pentaho Data Integration version 8.3.0.0-371.
      #
      # Here are a few examples of variables to set:
      #
      # PRODUCTION_SERVER = hercules
      # TEST_SERVER = zeus
      # DEVELOPMENT_SERVER = thor
      #
      # Note: lines like these with a # in front of it are comments
      #"
{{end}}